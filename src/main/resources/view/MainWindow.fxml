<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<?import morpher.ui.CycleNavigator?>
<?import morpher.ui.MappingVisualizer?>

<?import javafx.scene.layout.AnchorPane?>

<HBox alignment="TOP_CENTER" spacing="10"
      style="-fx-padding: 20;"
      xmlns="http://javafx.com/javafx/22"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="morpher.ui.Controller">

    <VBox prefHeight="432.0" prefWidth="200.0" minWidth="200" maxWidth="200" spacing="15" HBox.hgrow="ALWAYS">
        <TitledPane collapsible="false" text="Pinned Applications">
            <VBox prefHeight="257.0" prefWidth="269.0" spacing="8">
                <ListView fx:id="pinnedListView" prefHeight="204.0" prefWidth="248.0" />
                <Button onAction="#onShowMorePinned" text="Show More" />
            </VBox>
        </TitledPane>

        <TitledPane collapsible="false" text="Upload AI Models">
            <VBox alignment="CENTER" spacing="10">
                <Label text="Drag / drop files here" />
                <Button fx:id="onSelectFile" onAction="#onSelectFile" text="Select File" />
            </VBox>
        </TitledPane>
    </VBox>


    <VBox spacing="15" HBox.hgrow="ALWAYS">
        <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE">
            <Tab text="Visualization">
                <VBox spacing="6" alignment="CENTER">
                    <ScrollPane fitToWidth="false" fitToHeight="false"
                                hbarPolicy="AS_NEEDED" vbarPolicy="AS_NEEDED"
                                VBox.vgrow="ALWAYS" fx:id="vizScroll">
                        <content>
                            <StackPane alignment="CENTER">
                                <MappingVisualizer fx:id="mappingViz"/>
                            </StackPane>
                        </content>


                    </ScrollPane>
                    <CycleNavigator fx:id="cycleNav" />
                </VBox>
            </Tab>
            <Tab text="Source Code">
                <VBox prefHeight="400" spacing="5" VBox.vgrow="ALWAYS">
                    <StackPane fx:id="codePane" VBox.vgrow="ALWAYS" />
                </VBox>
            </Tab>
            <Tab text="DFG">
                <content>
                    <AnchorPane xmlns="http://javafx.com/javafx/22"
                                xmlns:fx="http://javafx.com/fxml/1">
                        <!-- 填满全区的 ScrollPane -->
                        <ScrollPane fx:id="dfgScroll"
                                    fitToWidth="true"  fitToHeight="true"
                                    hbarPolicy="AS_NEEDED" vbarPolicy="AS_NEEDED"
                                    AnchorPane.topAnchor="0"    AnchorPane.bottomAnchor="0"
                                    AnchorPane.leftAnchor="0"   AnchorPane.rightAnchor="0">
                            <content>
                                <!-- 这是拿到 PDF ImageView 的容器 -->
                                <StackPane fx:id="dfgPane"/>
                            </content>
                        </ScrollPane>

                        <!-- 锚点到右上角的按钮组 -->
                        <HBox spacing="10" alignment="CENTER"
                              AnchorPane.topAnchor="10" AnchorPane.rightAnchor="15">
                            <Button text="Zoom In"  onAction="#onZoomIn"/>
                            <Button text="Zoom Out" onAction="#onZoomOut"/>
                        </HBox>
                    </AnchorPane>
                </content>
            </Tab>

            <Tab text="Fabric Debugger">
                <Pane fx:id="debuggerPane" prefHeight="400.0" />
            </Tab>
        </TabPane>
    </VBox>


    <VBox prefHeight="432.0" prefWidth="145.0" minWidth="145" maxWidth="145" spacing="15" HBox.hgrow="ALWAYS">
        <VBox spacing="10">
            <Button fx:id="btnGenerate" onAction="#onGenerateAccelerator" prefHeight="30.0" prefWidth="133.0" text="Generate Accelerator" />
            <Button fx:id="btnUpload" onAction="#onUploadToDevice" prefHeight="30.0" prefWidth="133.0" text="Upload to Device" />
        </VBox>

        <VBox spacing="8">
            <Label text="Resource Utilization: 80%" />
            <ProgressBar prefHeight="20.0" prefWidth="133.0" progress="0.8" />

            <Label text="Battery Life: 1 year" />
            <ProgressBar prefHeight="20.0" prefWidth="133.0" progress="1.0" />

            <Label text="Performance: 360 GOPS/W" />
            <ProgressBar prefHeight="20.0" prefWidth="133.0" progress="1.0" />
        </VBox>
    </VBox>

</HBox>
